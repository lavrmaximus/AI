#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∞–º
–°–æ–¥–µ—Ä–∂–∏—Ç –æ–ø–∏—Å–∞–Ω–∏—è –≤—Å–µ—Ö –º–µ—Ç—Ä–∏–∫, –∏—Ö —Ä–∞—Å—á–µ—Ç—ã –∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é
"""

from telegram import InlineKeyboardButton, InlineKeyboardMarkup
from typing import Dict, List

# –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–µ—Ç—Ä–∏–∫ –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
METRIC_CATEGORIES = {
    'profitability': {
        'name': 'üí∞ –†–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å',
        'description': '–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç–∏ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏',
        'metrics': ['profit_margin', 'roi', 'profitability_index', 'roe']
    },
    'growth': {
        'name': 'üìà –†–æ—Å—Ç',
        'description': '–ú–µ—Ç—Ä–∏–∫–∏ —Ä–æ—Å—Ç–∞ –∏ —Ä–∞–∑–≤–∏—Ç–∏—è –±–∏–∑–Ω–µ—Å–∞',
        'metrics': ['revenue_growth_rate', 'sgr', 'asset_turnover']
    },
    'customers': {
        'name': 'üë• –ö–ª–∏–µ–Ω—Ç—ã',
        'description': '–ú–µ—Ç—Ä–∏–∫–∏ —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏',
        'metrics': ['ltv', 'cac', 'ltv_cac_ratio', 'customer_profit_margin']
    },
    'safety': {
        'name': 'üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å',
        'description': '–ú–µ—Ç—Ä–∏–∫–∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏',
        'metrics': ['break_even_clients', 'safety_margin', 'months_to_bankruptcy']
    },
    'health': {
        'name': 'üè• –ó–¥–æ—Ä–æ–≤—å–µ',
        'description': '–û–±—â–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –∑–¥–æ—Ä–æ–≤—å—è –±–∏–∑–Ω–µ—Å–∞',
        'metrics': ['financial_health_score', 'growth_health_score', 'efficiency_health_score', 'overall_health_score']
    }
}

# –ü–æ–¥—Ä–æ–±–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –º–µ—Ç—Ä–∏–∫
METRIC_DESCRIPTIONS = {
    # –†–ï–ù–¢–ê–ë–ï–õ–¨–ù–û–°–¢–¨
    'profit_margin': {
        'name': '–†–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–∞–∂',
        'formula': '–ü—Ä–∏–±—ã–ª—å / –í—ã—Ä—É—á–∫–∞ √ó 100%',
        'description': '–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–∞—è –¥–æ–ª—è –≤—ã—Ä—É—á–∫–∏ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ –≤–∏–¥–µ –ø—Ä–∏–±—ã–ª–∏ –ø–æ—Å–ª–µ –ø–æ–∫—Ä—ã—Ç–∏—è –≤—Å–µ—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤.',
        'calculation': '–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ —á–∏—Å—Ç–æ–π –ø—Ä–∏–±—ã–ª–∏ –∫ –≤—ã—Ä—É—á–∫–µ, —É–º–Ω–æ–∂–µ–Ω–Ω–æ–µ –Ω–∞ 100%.',
        'good_values': '> 15% - –æ—Ç–ª–∏—á–Ω–∞—è —Ä–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å\n10-15% - —Ö–æ—Ä–æ—à–∞—è —Ä–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å\n5-10% - —Å—Ä–µ–¥–Ω—è—è —Ä–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å',
        'bad_values': '< 5% - –Ω–∏–∑–∫–∞—è —Ä–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å\n< 0% - —É–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å',
        'interpretation': '–í—ã—Å–æ–∫–∞—è —Ä–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å –æ–∑–Ω–∞—á–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—Ç—Ä–∞—Ç–∞–º–∏ –∏ —Ö–æ—Ä–æ—à—É—é —Ü–µ–Ω–æ–≤—É—é –ø–æ–ª–∏—Ç–∏–∫—É.',
        'improvement': '‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞—Ç—Ä–∞—Ç—ã\n‚Ä¢ –ü–æ–≤—ã—Å–∏—Ç—å —Ü–µ–Ω—ã\n‚Ä¢ –£–≤–µ–ª–∏—á–∏—Ç—å –æ–±—ä–µ–º—ã –ø—Ä–æ–¥–∞–∂\n‚Ä¢ –°–Ω–∏–∑–∏—Ç—å —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å'
    },
    
    'roi': {
        'name': 'ROI (–í–æ–∑–≤—Ä–∞—Ç –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π)',
        'formula': '(–ü—Ä–∏–±—ã–ª—å - –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏) / –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ √ó 100%',
        'description': '–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π - —Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–±—ã–ª–∏ –ø—Ä–∏–Ω–æ—Å—è—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞.',
        'calculation': '–†–∞–∑–Ω–æ—Å—Ç—å –º–µ–∂–¥—É –ø—Ä–∏–±—ã–ª—å—é –∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è–º–∏, –¥–µ–ª–µ–Ω–Ω–∞—è –Ω–∞ —Å—É–º–º—É –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π.',
        'good_values': '> 20% - –æ—Ç–ª–∏—á–Ω–∞—è –æ–∫—É–ø–∞–µ–º–æ—Å—Ç—å\n10-20% - —Ö–æ—Ä–æ—à–∞—è –æ–∫—É–ø–∞–µ–º–æ—Å—Ç—å\n5-10% - —Å—Ä–µ–¥–Ω—è—è –æ–∫—É–ø–∞–µ–º–æ—Å—Ç—å',
        'bad_values': '< 5% - –Ω–∏–∑–∫–∞—è –æ–∫—É–ø–∞–µ–º–æ—Å—Ç—å\n< 0% - —É–±—ã—Ç–æ—á–Ω—ã–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏',
        'interpretation': 'ROI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–∏–±—ã–ª–∏.',
        'improvement': '‚Ä¢ –£–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–æ–≤\n‚Ä¢ –°–æ–∫—Ä–∞—Ç–∏—Ç—å —Å—Ä–æ–∫–∏ –æ–∫—É–ø–∞–µ–º–æ—Å—Ç–∏\n‚Ä¢ –ü–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é'
    },
    
    'profitability_index': {
        'name': '–ò–Ω–¥–µ–∫—Å –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç–∏',
        'formula': '–ü—Ä–∏–±—ã–ª—å / –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏',
        'description': '–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –≤–æ —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø—Ä–∏–±—ã–ª—å –ø—Ä–µ–≤—ã—à–∞–µ—Ç –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏.',
        'calculation': '–û—Ç–Ω–æ—à–µ–Ω–∏–µ –æ–±—â–µ–π –ø—Ä–∏–±—ã–ª–∏ –∫ —Å—É–º–º–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π.',
        'good_values': '> 2.0 - –æ—Ç–ª–∏—á–Ω–∞—è –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç—å\n1.5-2.0 - —Ö–æ—Ä–æ—à–∞—è –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç—å\n1.0-1.5 - —Å—Ä–µ–¥–Ω—è—è –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç—å',
        'bad_values': '< 1.0 - –Ω–∏–∑–∫–∞—è –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç—å\n< 0 - —É–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å',
        'interpretation': '–ò–Ω–¥–µ–∫—Å –±–æ–ª—å—à–µ 1 –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç –ø—Ä–∏–Ω–æ—Å–∏—Ç –ø—Ä–∏–±—ã–ª—å.',
        'improvement': '‚Ä¢ –£–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç—å\n‚Ä¢ –°–Ω–∏–∑–∏—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã\n‚Ä¢ –£—Å–∫–æ—Ä–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏–±—ã–ª–∏'
    },
    
    'roe': {
        'name': 'ROE (–†–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–∞–ø–∏—Ç–∞–ª–∞)',
        'formula': '–ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å / –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–∞–ø–∏—Ç–∞–ª √ó 100%',
        'description': '–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–∞–ø–∏—Ç–∞–ª–∞.',
        'calculation': '–û—Ç–Ω–æ—à–µ–Ω–∏–µ —á–∏—Å—Ç–æ–π –ø—Ä–∏–±—ã–ª–∏ –∫ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º—É –∫–∞–ø–∏—Ç–∞–ª—É.',
        'good_values': '> 15% - –æ—Ç–ª–∏—á–Ω–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å\n10-15% - —Ö–æ—Ä–æ—à–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å\n5-10% - —Å—Ä–µ–¥–Ω—è—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å',
        'bad_values': '< 5% - –Ω–∏–∑–∫–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å\n< 0% - —É–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å',
        'interpretation': 'ROE –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–∞–ø–∏—Ç–∞–ª.',
        'improvement': '‚Ä¢ –£–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç—å\n‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–∞–ø–∏—Ç–∞–ª–∞\n‚Ä¢ –£–ª—É—á—à–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—É—é —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å'
    },
    
    # –†–û–°–¢
    'revenue_growth_rate': {
        'name': '–¢–µ–º–ø —Ä–æ—Å—Ç–∞ –≤—ã—Ä—É—á–∫–∏',
        'formula': '(–í—ã—Ä—É—á–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ - –í—ã—Ä—É—á–∫–∞ –ø—Ä–æ—à–ª–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞) / –í—ã—Ä—É—á–∫–∞ –ø—Ä–æ—à–ª–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ √ó 100%',
        'description': '–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–æ—Å—Ç–∞ –≤—ã—Ä—É—á–∫–∏ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö.',
        'calculation': '–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—ã—Ä—É—á–∫–∏ —Ç–µ–∫—É—â–µ–≥–æ –∏ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–µ—Ä–∏–æ–¥–æ–≤.',
        'good_values': '> 20% - –±—ã—Å—Ç—Ä—ã–π —Ä–æ—Å—Ç\n10-20% - —Ö–æ—Ä–æ—à–∏–π —Ä–æ—Å—Ç\n5-10% - —É–º–µ—Ä–µ–Ω–Ω—ã–π —Ä–æ—Å—Ç',
        'bad_values': '< 5% - –º–µ–¥–ª–µ–Ω–Ω—ã–π —Ä–æ—Å—Ç\n< 0% - —Å–Ω–∏–∂–µ–Ω–∏–µ –≤—ã—Ä—É—á–∫–∏',
        'interpretation': '–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π —Ä–æ—Å—Ç –æ–∑–Ω–∞—á–∞–µ—Ç —Ä–∞–∑–≤–∏—Ç–∏–µ –±–∏–∑–Ω–µ—Å–∞ –∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–∂.',
        'improvement': '‚Ä¢ –†–∞—Å—à–∏—Ä–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é –±–∞–∑—É\n‚Ä¢ –£–≤–µ–ª–∏—á–∏—Ç—å —Å—Ä–µ–¥–Ω–∏–π —á–µ–∫\n‚Ä¢ –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã\n‚Ä¢ –£–ª—É—á—à–∏—Ç—å –º–∞—Ä–∫–µ—Ç–∏–Ω–≥'
    },
    
    'sgr': {
        'name': 'SGR (–£—Å—Ç–æ–π—á–∏–≤—ã–π —Ç–µ–º–ø —Ä–æ—Å—Ç–∞)',
        'formula': 'ROE √ó (1 - –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤—ã–ø–ª–∞—Ç)',
        'description': '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ç–µ–º–ø —Ä–æ—Å—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –∫–æ–º–ø–∞–Ω–∏—è –º–æ–∂–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –±–µ–∑ –≤–Ω–µ—à–Ω–µ–≥–æ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è.',
        'calculation': '–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ ROE –Ω–∞ –¥–æ–ª—é –Ω–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –ø—Ä–∏–±—ã–ª–∏.',
        'good_values': '> 15% - –≤—ã—Å–æ–∫–∏–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª —Ä–æ—Å—Ç–∞\n10-15% - —Ö–æ—Ä–æ—à–∏–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª\n5-10% - —Å—Ä–µ–¥–Ω–∏–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª',
        'bad_values': '< 5% - –Ω–∏–∑–∫–∏–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª —Ä–æ—Å—Ç–∞\n< 0% - –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–æ—Å—Ç–∞',
        'interpretation': 'SGR –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ –±—ã—Å—Ç—Ä–æ –º–æ–∂–µ—Ç —Ä–∞—Å—Ç–∏ –±–∏–∑–Ω–µ—Å –∑–∞ —Å—á–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤.',
        'improvement': '‚Ä¢ –£–≤–µ–ª–∏—á–∏—Ç—å —Ä–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å\n‚Ä¢ –°–Ω–∏–∑–∏—Ç—å –≤—ã–ø–ª–∞—Ç—ã –¥–∏–≤–∏–¥–µ–Ω–¥–æ–≤\n‚Ä¢ –£–ª—É—á—à–∏—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–ø–∏—Ç–∞–ª–æ–º'
    },
    
    'asset_turnover': {
        'name': '–û–±–æ—Ä–∞—á–∏–≤–∞–µ–º–æ—Å—Ç—å –∞–∫—Ç–∏–≤–æ–≤',
        'formula': '–í—ã—Ä—É—á–∫–∞ / –°—Ä–µ–¥–Ω—è—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∞–∫—Ç–∏–≤–æ–≤',
        'description': '–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∞–∫—Ç–∏–≤—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤—ã—Ä—É—á–∫–∏.',
        'calculation': '–û—Ç–Ω–æ—à–µ–Ω–∏–µ –≤—ã—Ä—É—á–∫–∏ –∫ —Å—Ä–µ–¥–Ω–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∞–∫—Ç–∏–≤–æ–≤ –∑–∞ –ø–µ—Ä–∏–æ–¥.',
        'good_values': '> 2.0 - –≤—ã—Å–æ–∫–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å\n1.0-2.0 - —Å—Ä–µ–¥–Ω—è—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å\n0.5-1.0 - –Ω–∏–∑–∫–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å',
        'bad_values': '< 0.5 - –æ—á–µ–Ω—å –Ω–∏–∑–∫–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å',
        'interpretation': '–í—ã—Å–æ–∫–∞—è –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º–æ—Å—Ç—å –æ–∑–Ω–∞—á–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–æ–≤.',
        'improvement': '‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–æ–≤\n‚Ä¢ –ü—Ä–æ–¥–∞—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∞–∫—Ç–∏–≤—ã\n‚Ä¢ –£–≤–µ–ª–∏—á–∏—Ç—å –≤—ã—Ä—É—á–∫—É'
    },
    
    # –ö–õ–ò–ï–ù–¢–´
    'ltv': {
        'name': 'LTV (–ü–æ–∂–∏–∑–Ω–µ–Ω–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç–∞)',
        'formula': '–°—Ä–µ–¥–Ω–∏–π —á–µ–∫ √ó –ß–∞—Å—Ç–æ—Ç–∞ –ø–æ–∫—É–ø–æ–∫ √ó –°—Ä–æ–∫ –∂–∏–∑–Ω–∏ –∫–ª–∏–µ–Ω—Ç–∞',
        'description': '–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—â—É—é –ø—Ä–∏–±—ã–ª—å, –∫–æ—Ç–æ—Ä—É—é –ø—Ä–∏–Ω–æ—Å–∏—Ç –æ–¥–∏–Ω –∫–ª–∏–µ–Ω—Ç –∑–∞ –≤—Å–µ –≤—Ä–µ–º—è —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞.',
        'calculation': '–ü—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–µ–≥–æ —á–µ–∫–∞, —á–∞—Å—Ç–æ—Ç—ã –ø–æ–∫—É–ø–æ–∫ –∏ —Å—Ä–µ–¥–Ω–µ–≥–æ —Å—Ä–æ–∫–∞ –∂–∏–∑–Ω–∏ –∫–ª–∏–µ–Ω—Ç–∞.',
        'good_values': '> 50,000 —Ä—É–± - –≤—ã—Å–æ–∫–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å\n20,000-50,000 —Ä—É–± - —Å—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–Ω–æ—Å—Ç—å\n10,000-20,000 —Ä—É–± - –Ω–∏–∑–∫–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å',
        'bad_values': '< 10,000 —Ä—É–± - –æ—á–µ–Ω—å –Ω–∏–∑–∫–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å',
        'interpretation': 'LTV –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å, —Å–∫–æ–ª—å–∫–æ –º–æ–∂–Ω–æ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å –Ω–∞ –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞.',
        'improvement': '‚Ä¢ –£–≤–µ–ª–∏—á–∏—Ç—å —Å—Ä–µ–¥–Ω–∏–π —á–µ–∫\n‚Ä¢ –ü–æ–≤—ã—Å–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É –ø–æ–∫—É–ø–æ–∫\n‚Ä¢ –£–ª—É—á—à–∏—Ç—å —É–¥–µ—Ä–∂–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤\n‚Ä¢ –†–∞–∑–≤–∏–≤–∞—Ç—å –ª–æ—è–ª—å–Ω–æ—Å—Ç—å'
    },
    
    'cac': {
        'name': 'CAC (–°—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞)',
        'formula': '–ó–∞—Ç—Ä–∞—Ç—ã –Ω–∞ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥ / –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤',
        'description': '–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç –ø—Ä–∏–≤–ª–µ—á—å –æ–¥–Ω–æ–≥–æ –Ω–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞.',
        'calculation': '–û–±—â–∏–µ –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥, –¥–µ–ª–µ–Ω–Ω—ã–µ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–≤–ª–µ—á–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤.',
        'good_values': '< 5,000 —Ä—É–± - –Ω–∏–∑–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å\n5,000-15,000 —Ä—É–± - —Å—Ä–µ–¥–Ω—è—è —Å—Ç–æ–∏–º–æ—Å—Ç—å\n15,000-30,000 —Ä—É–± - –≤—ã—Å–æ–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å',
        'bad_values': '> 30,000 —Ä—É–± - –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å',
        'interpretation': 'CAC –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –º–µ–Ω—å—à–µ LTV –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç–∏.',
        'improvement': '‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ –∫–∞–Ω–∞–ª—ã\n‚Ä¢ –£–ª—É—á—à–∏—Ç—å –∫–æ–Ω–≤–µ—Ä—Å–∏—é\n‚Ä¢ –°–Ω–∏–∑–∏—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ä–µ–∫–ª–∞–º—ã\n‚Ä¢ –ü–æ–≤—ã—Å–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–∞–∂'
    },
    
    'ltv_cac_ratio': {
        'name': 'LTV/CAC –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ',
        'formula': 'LTV / CAC',
        'description': '–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –ø–æ–∂–∏–∑–Ω–µ–Ω–Ω–æ–π —Ü–µ–Ω–Ω–æ—Å—Ç–∏ –∫–ª–∏–µ–Ω—Ç–∞ –∫ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –µ–≥–æ –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏—è.',
        'calculation': 'LTV, –¥–µ–ª–µ–Ω–Ω—ã–π –Ω–∞ CAC.',
        'good_values': '> 3:1 - –æ—Ç–ª–∏—á–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ\n2:1-3:1 - —Ö–æ—Ä–æ—à–µ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ\n1:1-2:1 - –ø—Ä–∏–µ–º–ª–µ–º–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ',
        'bad_values': '< 1:1 - —É–±—ã—Ç–æ—á–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ',
        'interpretation': '–°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π –≤ –ø—Ä–∏–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤.',
        'improvement': '‚Ä¢ –£–≤–µ–ª–∏—á–∏—Ç—å LTV\n‚Ä¢ –°–Ω–∏–∑–∏—Ç—å CAC\n‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é'
    },
    
    'customer_profit_margin': {
        'name': '–ú–∞—Ä–∂–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞',
        'formula': '–ü—Ä–∏–±—ã–ª—å —Å –∫–ª–∏–µ–Ω—Ç–∞ / –í—ã—Ä—É—á–∫–∞ —Å –∫–ª–∏–µ–Ω—Ç–∞ √ó 100%',
        'description': '–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å –æ–¥–Ω–∏–º –∫–ª–∏–µ–Ω—Ç–æ–º.',
        'calculation': '–û—Ç–Ω–æ—à–µ–Ω–∏–µ –ø—Ä–∏–±—ã–ª–∏ –∫ –≤—ã—Ä—É—á–∫–µ, –ø–æ–ª—É—á–µ–Ω–Ω–æ–π –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞.',
        'good_values': '> 30% - –≤—ã—Å–æ–∫–∞—è –º–∞—Ä–∂–∞\n20-30% - —Å—Ä–µ–¥–Ω—è—è –º–∞—Ä–∂–∞\n10-20% - –Ω–∏–∑–∫–∞—è –º–∞—Ä–∂–∞',
        'bad_values': '< 10% - –æ—á–µ–Ω—å –Ω–∏–∑–∫–∞—è –º–∞—Ä–∂–∞\n< 0% - —É–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å',
        'interpretation': '–í—ã—Å–æ–∫–∞—è –º–∞—Ä–∂–∞ –æ–∑–Ω–∞—á–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—É—é —Ä–∞–±–æ—Ç—É —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏.',
        'improvement': '‚Ä¢ –ü–æ–≤—ã—Å–∏—Ç—å —Ü–µ–Ω—ã\n‚Ä¢ –°–Ω–∏–∑–∏—Ç—å —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å\n‚Ä¢ –£–≤–µ–ª–∏—á–∏—Ç—å –æ–±—ä–µ–º—ã\n‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã'
    },
    
    # –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨
    'break_even_clients': {
        'name': '–¢–æ—á–∫–∞ –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏ (–∫–ª–∏–µ–Ω—Ç—ã)',
        'formula': '–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã / (–°—Ä–µ–¥–Ω–∏–π —á–µ–∫ - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞)',
        'description': '–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–µ–Ω—Ç–æ–≤ –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è –≤—Å–µ—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤.',
        'calculation': '–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã, –¥–µ–ª–µ–Ω–Ω—ã–µ –Ω–∞ –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω—É—é –ø—Ä–∏–±—ã–ª—å —Å –∫–ª–∏–µ–Ω—Ç–∞.',
        'good_values': '< 100 –∫–ª–∏–µ–Ω—Ç–æ–≤ - –Ω–∏–∑–∫–∏–π –ø–æ—Ä–æ–≥\n100-500 –∫–ª–∏–µ–Ω—Ç–æ–≤ - —Å—Ä–µ–¥–Ω–∏–π –ø–æ—Ä–æ–≥\n500-1000 –∫–ª–∏–µ–Ω—Ç–æ–≤ - –≤—ã—Å–æ–∫–∏–π –ø–æ—Ä–æ–≥',
        'bad_values': '> 1000 –∫–ª–∏–µ–Ω—Ç–æ–≤ - –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π –ø–æ—Ä–æ–≥',
        'interpretation': '–ù–∏–∑–∫–∞—è —Ç–æ—á–∫–∞ –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏ –æ–∑–Ω–∞—á–∞–µ—Ç –±—ã—Å—Ç—Ä—É—é –æ–∫—É–ø–∞–µ–º–æ—Å—Ç—å.',
        'improvement': '‚Ä¢ –°–Ω–∏–∑–∏—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã\n‚Ä¢ –£–≤–µ–ª–∏—á–∏—Ç—å —Å—Ä–µ–¥–Ω–∏–π —á–µ–∫\n‚Ä¢ –°–Ω–∏–∑–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã'
    },
    
    'safety_margin': {
        'name': '–ó–∞–ø–∞—Å —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –ø—Ä–æ—á–Ω–æ—Å—Ç–∏',
        'formula': '(–í—ã—Ä—É—á–∫–∞ - –¢–æ—á–∫–∞ –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏) / –í—ã—Ä—É—á–∫–∞ √ó 100%',
        'description': '–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ –≤—ã—Ä—É—á–∫–∞ –ø—Ä–µ–≤—ã—à–∞–µ—Ç —Ç–æ—á–∫—É –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏.',
        'calculation': '–†–∞–∑–Ω–æ—Å—Ç—å –º–µ–∂–¥—É –≤—ã—Ä—É—á–∫–æ–π –∏ —Ç–æ—á–∫–æ–π –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏, –¥–µ–ª–µ–Ω–Ω–∞—è –Ω–∞ –≤—ã—Ä—É—á–∫—É.',
        'good_values': '> 30% - –≤—ã—Å–æ–∫–∏–π –∑–∞–ø–∞—Å\n20-30% - —Å—Ä–µ–¥–Ω–∏–π –∑–∞–ø–∞—Å\n10-20% - –Ω–∏–∑–∫–∏–π –∑–∞–ø–∞—Å',
        'bad_values': '< 10% - –æ—á–µ–Ω—å –Ω–∏–∑–∫–∏–π –∑–∞–ø–∞—Å\n< 0% - —É–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å',
        'interpretation': '–í—ã—Å–æ–∫–∏–π –∑–∞–ø–∞—Å –æ–∑–Ω–∞—á–∞–µ—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –±–∏–∑–Ω–µ—Å–∞.',
        'improvement': '‚Ä¢ –£–≤–µ–ª–∏—á–∏—Ç—å –≤—ã—Ä—É—á–∫—É\n‚Ä¢ –°–Ω–∏–∑–∏—Ç—å —Ç–æ—á–∫—É –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏\n‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∑–∞—Ç—Ä–∞—Ç'
    },
    
    'months_to_bankruptcy': {
        'name': '–î–æ –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–∞ (–º–µ—Å—è—Ü–µ–≤)',
        'formula': '–î–µ–Ω–µ–∂–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ / –ï–∂–µ–º–µ—Å—è—á–Ω—ã–µ —É–±—ã—Ç–∫–∏',
        'description': '–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ –º–µ—Å—è—Ü–µ–≤ –±–∏–∑–Ω–µ—Å –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∏ —Ç–µ–∫—É—â–∏—Ö —É–±—ã—Ç–∫–∞—Ö.',
        'calculation': '–û—Ç–Ω–æ—à–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ –∫ –µ–∂–µ–º–µ—Å—è—á–Ω—ã–º –ø–æ—Ç–µ—Ä—è–º.',
        'good_values': '> 12 –º–µ—Å—è—Ü–µ–≤ - –±–µ–∑–æ–ø–∞—Å–Ω–æ\n6-12 –º–µ—Å—è—Ü–µ–≤ - —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è\n3-6 –º–µ—Å—è—Ü–µ–≤ - –∫—Ä–∏—Ç–∏—á–Ω–æ',
        'bad_values': '< 3 –º–µ—Å—è—Ü–µ–≤ - –∫—Ä–∞–π–Ω–µ –æ–ø–∞—Å–Ω–æ',
        'interpretation': '–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–π –≥–æ—Ä–∏–∑–æ–Ω—Ç –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Ç—É–∞—Ü–∏–∏.',
        'improvement': '‚Ä¢ –°—Ä–æ—á–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –≤—ã—Ä—É—á–∫—É\n‚Ä¢ –°–Ω–∏–∑–∏—Ç—å —Ä–∞—Å—Ö–æ–¥—ã\n‚Ä¢ –ü—Ä–∏–≤–ª–µ—á—å —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ\n‚Ä¢ –†–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–æ–ª–≥–∏'
    },
    
    # –ó–î–û–†–û–í–¨–ï
    'financial_health_score': {
        'name': '–§–∏–Ω–∞–Ω—Å–æ–≤–æ–µ –∑–¥–æ—Ä–æ–≤—å–µ',
        'formula': '–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Ä–µ–Ω—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏, –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ –∏ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏',
        'description': '–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–∏–∑–Ω–µ—Å–∞ (0-100 –±–∞–ª–ª–æ–≤).',
        'calculation': '–í–∑–≤–µ—à–µ–Ω–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π.',
        'good_values': '80-100 - –æ—Ç–ª–∏—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ\n60-80 - —Ö–æ—Ä–æ—à–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ\n40-60 - —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ–µ',
        'bad_values': '20-40 - –ø–ª–æ—Ö–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ\n0-20 - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ',
        'interpretation': '–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—â—É—é —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –±–∏–∑–Ω–µ—Å–∞.',
        'improvement': '‚Ä¢ –£–ª—É—á—à–∏—Ç—å –≤—Å–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏\n‚Ä¢ –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Ö–æ–¥—ã –∏ —Ä–∞—Å—Ö–æ–¥—ã\n‚Ä¢ –£–∫—Ä–µ–ø–∏—Ç—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—É—é –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—É'
    },
    
    'growth_health_score': {
        'name': '–ó–¥–æ—Ä–æ–≤—å–µ —Ä–æ—Å—Ç–∞',
        'formula': '–û—Ü–µ–Ω–∫–∞ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–æ—Å—Ç–∞ –±–∏–∑–Ω–µ—Å–∞',
        'description': '–û—Ü–µ–Ω–∫–∞ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –±–∏–∑–Ω–µ—Å–∞ –∫ —Ä–∞–∑–≤–∏—Ç–∏—é –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é (0-100 –±–∞–ª–ª–æ–≤).',
        'calculation': '–ê–Ω–∞–ª–∏–∑ —Ç–µ–º–ø–æ–≤ —Ä–æ—Å—Ç–∞, –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π –∏ —Ä–∞–∑–≤–∏—Ç–∏—è.',
        'good_values': '80-100 - –≤—ã—Å–æ–∫–∏–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª —Ä–æ—Å—Ç–∞\n60-80 - —Ö–æ—Ä–æ—à–∏–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª\n40-60 - —Å—Ä–µ–¥–Ω–∏–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª',
        'bad_values': '20-40 - –Ω–∏–∑–∫–∏–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª\n0-20 - –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–æ—Å—Ç–∞',
        'interpretation': '–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –±–∏–∑–Ω–µ—Å–∞ –∫ —Ä–∞–∑–≤–∏—Ç–∏—é.',
        'improvement': '‚Ä¢ –£–≤–µ–ª–∏—á–∏—Ç—å —Ç–µ–º–ø—ã —Ä–æ—Å—Ç–∞\n‚Ä¢ –ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ\n‚Ä¢ –†–∞—Å—à–∏—Ä—è—Ç—å —Ä—ã–Ω–∫–∏\n‚Ä¢ –í–Ω–µ–¥—Ä—è—Ç—å –∏–Ω–Ω–æ–≤–∞—Ü–∏–∏'
    },
    
    'efficiency_health_score': {
        'name': '–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å',
        'formula': '–û—Ü–µ–Ω–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤',
        'description': '–û—Ü–µ–Ω–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (0-100 –±–∞–ª–ª–æ–≤).',
        'calculation': '–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º–æ—Å—Ç–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.',
        'good_values': '80-100 - –≤—ã—Å–æ–∫–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å\n60-80 - —Ö–æ—Ä–æ—à–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å\n40-60 - —Å—Ä–µ–¥–Ω—è—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å',
        'bad_values': '20-40 - –Ω–∏–∑–∫–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å\n0-20 - –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å',
        'interpretation': '–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ä–µ—Å—É—Ä—Å—ã.',
        'improvement': '‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å—ã\n‚Ä¢ –ü–æ–≤—ã—Å–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å\n‚Ä¢ –°–Ω–∏–∑–∏—Ç—å –ø–æ—Ç–µ—Ä–∏\n‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏'
    },
    
    'overall_health_score': {
        'name': '–û–±—â–µ–µ –∑–¥–æ—Ä–æ–≤—å–µ –±–∏–∑–Ω–µ—Å–∞',
        'formula': '–°—Ä–µ–¥–Ω–µ–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –≤—Å–µ—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π –∑–¥–æ—Ä–æ–≤—å—è',
        'description': '–ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–∏–∑–Ω–µ—Å–∞ (0-100 –±–∞–ª–ª–æ–≤).',
        'calculation': '–°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ, —Ä–æ—Å—Ç–∞ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∑–¥–æ—Ä–æ–≤—å—è.',
        'good_values': '80-100 - –æ—Ç–ª–∏—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ\n60-80 - —Ö–æ—Ä–æ—à–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ\n40-60 - —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ–µ',
        'bad_values': '20-40 - –ø–ª–æ—Ö–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ\n0-20 - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ',
        'interpretation': '–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –∏ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤ –±–∏–∑–Ω–µ—Å–∞.',
        'improvement': '‚Ä¢ –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —É–ª—É—á—à–µ–Ω–∏—é\n‚Ä¢ –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –≤—Å–µ—Ö –∞—Å–ø–µ–∫—Ç–æ–≤\n‚Ä¢ –°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ'
    }
}

def get_categories_keyboard() -> InlineKeyboardMarkup:
    """–°–æ–∑–¥–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –º–µ—Ç—Ä–∏–∫"""
    keyboard = []
    for category_id, category in METRIC_CATEGORIES.items():
        keyboard.append([InlineKeyboardButton(
            f"{category['name']} ({len(category['metrics'])})",
            callback_data=f"metrics_cat_{category_id}"
        )])
    
    keyboard.append([InlineKeyboardButton("‚ùå –ó–∞–∫—Ä—ã—Ç—å", callback_data="metrics_close")])
    return InlineKeyboardMarkup(keyboard)

def get_metrics_keyboard(category_id: str) -> InlineKeyboardMarkup:
    """–°–æ–∑–¥–∞–µ—Ç –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"""
    if category_id not in METRIC_CATEGORIES:
        return None
    
    category = METRIC_CATEGORIES[category_id]
    keyboard = []
    
    for metric_id in category['metrics']:
        if metric_id in METRIC_DESCRIPTIONS:
            metric = METRIC_DESCRIPTIONS[metric_id]
            keyboard.append([InlineKeyboardButton(
                metric['name'],
                callback_data=f"metrics_detail_{metric_id}"
            )])
    
    keyboard.append([InlineKeyboardButton("‚óÄÔ∏è –ù–∞–∑–∞–¥ –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º", callback_data="metrics_back")])
    return InlineKeyboardMarkup(keyboard)

def get_metric_description(metric_id: str) -> str:
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏"""
    if metric_id not in METRIC_DESCRIPTIONS:
        return "‚ùå –ú–µ—Ç—Ä–∏–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
    
    metric = METRIC_DESCRIPTIONS[metric_id]
    
    description = f"üìä **{metric['name']}**\n\n"
    description += f"**–§–æ—Ä–º—É–ª–∞:** `{metric['formula']}`\n\n"
    description += f"**–û–ø–∏—Å–∞–Ω–∏–µ:**\n{metric['description']}\n\n"
    description += f"**–†–∞—Å—á–µ—Ç:**\n{metric['calculation']}\n\n"
    description += f"**–•–æ—Ä–æ—à–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è:**\n{metric['good_values']}\n\n"
    description += f"**–ü–ª–æ—Ö–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è:**\n{metric['bad_values']}\n\n"
    description += f"**–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:**\n{metric['interpretation']}\n\n"
    description += f"**–ö–∞–∫ —É–ª—É—á—à–∏—Ç—å:**\n{metric['improvement']}"
    
    return description

def get_category_description(category_id: str) -> str:
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–µ—Ç—Ä–∏–∫"""
    if category_id not in METRIC_CATEGORIES:
        return "‚ùå –ö–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
    
    category = METRIC_CATEGORIES[category_id]
    description = f"**{category['name']}**\n\n"
    description += f"{category['description']}\n\n"
    description += "**–ú–µ—Ç—Ä–∏–∫–∏ –≤ —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:**\n"
    
    for metric_id in category['metrics']:
        if metric_id in METRIC_DESCRIPTIONS:
            metric = METRIC_DESCRIPTIONS[metric_id]
            description += f"‚Ä¢ {metric['name']}\n"
    
    return description
